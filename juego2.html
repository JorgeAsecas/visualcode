<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desarrollo Web En Entorno Cliente</title>
    <link href="juego2.css" rel="stylesheet">
</head>
<body>
    <br>
    <br>
    <div align="center">
        <button onclick="generar(0);">
            Nuevo Tablero
        </button>
    </div>
    <table class="tabla2" border="1" align="center">
        <tbody>
            <tr width="75px" align="center">
                <td width="75px" height="110px" id="td0p0">
                    <div>
                        <div id="l0p0">
                            <button onclick="imprimir(0, 0);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll0p0"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td width="75px" id="td0p1">
                    <div>
                        <div id="l0p1">
                            <button onclick="imprimir(0, 1);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll0p1"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td width="75px" id="td0p2">
                    <div>
                        <div id="l0p2">
                            <button onclick="imprimir(0, 2);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll0p2"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td width="75px" id="td0p3">
                    <div>
                        <div id="l0p3">
                            <button onclick="imprimir(0, 3);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll0p3"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td width="75px" id="td0p4">
                    <div>
                        <div id="l0p4">
                            <button onclick="imprimir(0, 4);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll0p4"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td width="75px">
                    <p id="fila0">P</p>
                </td>
            </tr>
            <tr align="center">
                <td id="td1p0" height="110px">
                    <div>
                        <div id="l1p0" >
                            <button onclick="imprimir(1, 0);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll1p0"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td1p1">
                    <div>
                        <div id="l1p1" >
                            <button onclick="imprimir(1, 1);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll1p1"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td1p2">
                    <div>
                        <div id="l1p2">
                            <button onclick="imprimir(1, 2);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll1p2"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td1p3">
                    <div>
                        <div id="l1p3">
                            <button onclick="imprimir(1, 3);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll1p3"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td1p4">
                    <div>
                        <div id="l1p4">
                            <button onclick="imprimir(1, 4);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll1p4"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td>
                    <p id="fila1">P</p>
                </td>
            </tr>
            <tr align="center">
                <td id="td2p0" height="110px">
                    <div>
                        <div id="l2p0">
                            <button onclick="imprimir(2, 0);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll2p0"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td2p1">
                    <div>
                        <div id="l2p1">
                            <button onclick="imprimir(2, 1);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll2p1"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td2p2" >
                    <div>
                        <div id="l2p2">
                            <button onclick="imprimir(2, 2);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll2p2"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td2p3">
                    <div>
                        <div id="l2p3">
                            <button onclick="imprimir(2, 3);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll2p3"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td2p4">
                    <div>
                        <div id="l2p4">
                            <button onclick="imprimir(2, 4);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll2p4"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td>
                    <p id="fila2">P</p>
                </td>
            </tr>
            <tr align="center">
                <td id="td3p0" height="110px">
                    <div>
                        <div id="l3p0">
                            <button onclick="imprimir(3, 0);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll3p0"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td3p1">
                    <div>
                        <div id="l3p1">
                            <button onclick="imprimir(3, 1);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll3p1"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td3p2">
                    <div>
                        <div id="l3p2">
                            <button onclick="imprimir(3, 2);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll3p2"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td3p3">
                    <div>
                        <div id="l3p3">
                            <button onclick="imprimir(3, 3);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll3p3"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td3p4">
                    <div>
                        <div id="l3p4">
                            <button onclick="imprimir(3, 4);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll3p4"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td>
                    <p id="fila3">P</p>
                </td>
            </tr>
            <tr align="center">
                <td id="td4p0" height="110px">
                    <div>
                        <div id="l4p0">
                            <button onclick="imprimir(4, 0);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll4p0"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td4p1">
                    <div>
                        <div id="l4p1">
                            <button onclick="imprimir(4, 1);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll4p1"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td4p2">
                    <div>
                        <div id="l4p2">
                            <button onclick="imprimir(4, 2);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll4p2"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td4p3">
                    <div>
                        <div id="l4p3">
                            <button onclick="imprimir(4, 3);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll4p3"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td id="td4p4">
                    <div>
                        <div id="l4p4">
                            <button onclick="imprimir(4, 4);">
                                &#9760
                            </button>
                        </div>
                    </div>
                    <p id="ll4p4"><img src="pokemon.png" width="50px" height="50px" alt="Campo"></p>
                </td>
                <td>
                    <p id="fila4">P</p>
                </td>
            </tr>
            <tr align="center">
                <td>
                    <p id="columna0">P</p>
                </td>
                <td>
                    <p id="columna1">P</p>
                </td>
                <td>
                    <p id="columna2">P</p>
                </td>
                <td>
                    <p id="columna3">P</p>
                </td>
                <td>
                    <p id="columna4">P</p>
                </td>
                <td>
                    <p id="totalp" >P</p>
                </td>
            </tr>
        </tbody>
    </table>
    <script>
    puntuacion = 0

    function color(fila, columna) {
        //Los parametros son las pocisiones
        //de la tabla html donde se van a cambiar el color
        //y las pocisiones en el array de donde
        //se van a sacar los datos para la comprobacion

        if (tablero[fila][columna] == 3) {
            document.getElementById("td" + fila + "p" + columna).style.backgroundColor = "#00FF00";
            document.getElementById("td" + fila + "p" + columna).style.color = "#000000";
        } else if (tablero[fila][columna] == 2){
            document.getElementById("td" + fila + "p" + columna).style.backgroundColor = "#81FF81";
            document.getElementById("td" + fila + "p" + columna).style.color = "#000000";
        } else if (tablero[fila][columna] == 1){
            document.getElementById("td" + fila + "p" + columna).style.backgroundColor = "#C8FFC8";
            document.getElementById("td" + fila + "p" + columna).style.color = "#000000";
        }
    }
    function perdiste() {
        window.location.reload()
        alert('Perdiste, crea un nuevo tablero por favor')
    }
    function condicional(fila, columna) {
        return tablero[fila][columna] == null ? perdiste() : "<strong>" + tablero[fila][columna] + "</strong>"
    }
    function imprimir(fila, columna) {
        //Los parametros son las pocisiones
        //de la tabla html donde se van a colocar los datos
        //y las pocisiones en el array de donde
        //se van a sacar los datos

        puntuacion += tablero[fila][columna] == null ? 0: tablero[fila][columna]
        document.getElementById("ll" + fila + "p" + columna).innerHTML = condicional(fila, columna)
        document.getElementById("totalp").innerHTML = "TOTAL P:" + "<br>" + puntuacion
        document.getElementById("l" + fila + "p" + columna).innerHTML = ""
        color(fila, columna)

        if (total == puntuacion) {
            alert('Ganaste, sigue jugando')
            generar(puntuacion)
            total += puntuacion
        }
    }


    function generar(puntoos) {
        total = 0
        puntuacion = puntoos
        sumapc = 0
        bombasc = 0
        sumapf = 0
        bombasf = 0
        tablero = new Array(5)


        //Creo el arraymultidimensional
        //

        for (i = 0; i < tablero.length; i++) {
            tablero[i] = new Array(5)
        }

        //Generar array multidimensional con numeros aleatorios
        //en posiciones aleatorias y con huecos aleatorios

        for (i = 0; i < 21; i++) {
            fila = Math.floor(Math.random() * 5)
            columna = Math.floor(Math.random() * 5)
            tablero[fila][columna] = Math.floor((Math.random() * 3) + 1)

        }
        console.log(tablero)

        //Contar puntos y bombas columnas
        //

        for (i = 0; i < 5; i++) {
            for (i2 = 0; i2 < 5; i2++) {
                sumapc += tablero[i2][i] == null ? 0 : tablero[i2][i]
                bombasc += tablero[i2][i] == null ? 1 : 0
                document.getElementById("columna" + i).innerHTML ="P: " +  sumapc + "<br>" + "B: " + bombasc

            }
            sumapc = 0
            bombasc = 0
        }

        //Contar puntos y bombas fila
        //

        for (i = 0; i < 5; i++) {
            for (i2 = 0; i2 < 5; i2++) {
                sumapf += tablero[i][i2] == null ? 0 : tablero[i][i2]
                bombasf += tablero[i][i2] == null ? 1 : 0
                document.getElementById("fila" + i).innerHTML ="P: " +  sumapf + "<br>" + "B: " + bombasf

            }
            sumapf = 0
            bombasf = 0
        }

        //Puntos a cero o los mismos si ganas
        //

        document.getElementById("totalp").innerHTML = "P: " + puntoos


        for (i = 0; i < 5; i++) {
            for (i2 = 0; i2 < 5; i2++) {
                // Volver a escribir los "simbolo radiacion"
                //

                document.getElementById("ll" + i + "p" + i2).innerHTML = '<img src="pokemon.png" width="50px" height="50px" alt="Campo">'

                //Resetear el color
                //

                document.getElementById("td" + i + "p" + i2).style.backgroundColor = "white";
                document.getElementById("td" + i + "p" + i2).style.color = "#000000";

                //Al  pulsar el boton este se elimina
                //Aqui se vuelven a generar los botones con cada nuevo tablero
                //

                document.getElementById("l" + i + "p" + i2).innerHTML = '<button onclick=' + '"imprimir(' + i  + ',' +  i2 + ');"' + '>&#9760</button>'
            }
        }

        //Cuenta maximo de puntos para ganar
        //

        for (i = 0; i < 5; i++) {
            for (i2 = 0; i2 < 5; i2++) {
                total += tablero[i][i2] == null ? 0: tablero[i][i2]
            }
        }
    }
    </script>
</body>
</html>
